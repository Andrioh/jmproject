<div class="px-8 pt-8" [ngClass]="{ 'absolute' : state === 'empty' }">
    <h2 hlmH2>Organizations</h2>
    <div class="text-sm text-slate-500">See all the organizations that you're a part of.</div>
</div>



@if(state === "empty"){
<div class="flex grow p-8 flex-col gap-2 items-center justify-center">
    <h3 hlmH3>Is empty here</h3>
    <p class="text-sm text-slate-500">You dont have any organization or not belongs to any</p>
    <button hlmBtn (click)="create()">
        Start a organization
    </button>
</div>
}
@else if(state === "error404"){
    Api ou endpoint esta errado!
}
@else if(state === "unexpectedError"){
    Ocorreu um erro inesperado
}
@else if (state === "loading"){

    <div class="p-8">
        <div class="flex flex-row justify-between items-center">
            <hlm-skeleton class='h-6 w-56' />
    
            <div>
                <hlm-skeleton class='h-8 w-36' />
            </div>
        </div>
    
        <div class="relative overflow-x-auto">
            <hlm-table class="my-3 w-full text-sm text-left">
                <hlm-trow>
                    <hlm-skeleton class='h-4 w-36' />
                </hlm-trow>
                @for (item of [1,2,3,4]; track $index) {
                <hlm-trow>
                    <hlm-td class=" w-[90%] justify-right items-center">
                        <hlm-skeleton class='h-4 w-48' />
                    </hlm-td>
    
                    <hlm-td class=" w-[10%] justify-end">
                        <hlm-skeleton class='h-4 w-12' />
                    </hlm-td>
                </hlm-trow>
                }
            </hlm-table>
        </div>
    </div>
}
@else if(state === "content") {

<div class="p-8">
    <div class="flex flex-row justify-between items-center">
        <h2 hlmLarge>My organizations</h2>

        <div>
            <button hlmBtn (click)="create()">
                New organization
            </button>
        </div>
    </div>

    <div class="relative overflow-x-auto">
        <hlm-table class="w-full text-sm text-left border border-gray-400 mt-2 rounded">
            <hlm-trow>
                <hlm-th class="">Name</hlm-th>
            </hlm-trow>
            @for (item of organizations; track $index) {
            <hlm-trow>
                <hlm-td class=" w-[90%] justify-right items-center">{{item.name}}</hlm-td>

                <hlm-td class=" w-[10%] justify-end">
                    <button hlmBtn size="icon" variant="ghost" (click)="EditOrganization()">
                        <hlm-icon size='sm' name="lucideMoreHorizontal" />
                    </button>
                </hlm-td>
            </hlm-trow>
            }
        </hlm-table>
    </div>
</div>

<div class="p-8">

    <div class="flex flex-col">
        <h2 hlmLarge>Organization you collaborate with</h2>
        @if(!hasCollaborate){
        <div class="text-sm text-slate-500">You dont collaborate with any organization yet.</div>
        }
        <button *ngIf="!hasCollaborate" (click)="hasCollaborate = !hasCollaborate">click to show</button>
    </div>

    <hlm-table class="border border-gray-400 mt-2 rounded" *ngIf="hasCollaborate">
        <hlm-trow>
            <hlm-th class="w-[60%]">Name</hlm-th>
            <hlm-th class="w-[30%]">Status</hlm-th>
            <hlm-th class="w-[10%]"></hlm-th>
        </hlm-trow>

        @for (item of [{name: "OrganizationXX", x: 1}, {name: "OrganizationXY", x:0}]; track $index) {
        <hlm-trow>
            <hlm-td class="w-[60%] justify-right items-center">{{item.name}}</hlm-td>

            <hlm-td class="w-[30%]">
                <span hlmBadge variant="secondary">{{item.x == 1 ? 'Aguardando resposta' : 'Membro'}}</span>
            </hlm-td>

            <hlm-td class="w-[10%] justify-end ">
                <button hlmBtn size="icon" variant="ghost">
                    <hlm-icon size='sm' name="lucideMoreHorizontal" />
                </button>
            </hlm-td>
        </hlm-trow>
        }
    </hlm-table>

</div>


}



<hlm-sheet side="right" *ngIf="false">
    <button id="edit-profile" variant="outline" brnSheetTrigger hlmBtn>Edit Profile</button>
    <hlm-sheet-content *brnSheetContent="let ctx">
        <hlm-sheet-header>
            <h3 hlmSheetTitle>Edit Profile</h3>
            <p hlmSheetDescription>Make changes to your profile here. Click save when you're done.</p>
        </hlm-sheet-header>

        <div class="py-4">

            <hlm-tabs [tab]="tabActivated" class="w-full" (tabActivated)="tabActivated = $event">
                <hlm-tabs-list class="w-full grid grid-cols-4" aria-label="tabs example">
                    <button hlmTabsTrigger="general">General info</button>
                    <button hlmTabsTrigger="members">Members</button>
                    <button hlmTabsTrigger="audit">Audit</button>
                    <button hlmTabsTrigger="about">About</button>
                </hlm-tabs-list>
            </hlm-tabs>

        </div>

        {{tabActivated}}

        <div class="py-4 grid gap-4">
            <div class="items-center grid grid-cols-4 gap-4">
                <label hlmLabel for="name" class="text-right">Name</label>
                <input hlmInput id="name" value="Pedro Duarte" class="col-span-3" />
            </div>
            <div class="items-center grid grid-cols-4 gap-4">
                <label hlmLabel for="username" class="text-right">Username</label>
                <input hlmInput id="username" value="@peduarte" class="col-span-3" />
            </div>

            <div class="w-[461px] h-full bg-white relative">

                <div class="h-[10%] pl-[24px] flex justify-start items-center">

                    <button class="rounded-full" hlmBtn size="icon" variant="outline"><hlm-icon size='sm'
                            name="lucideArrowLeft" /></button>
                    <p class="text-[#0F172A] pl-4">Editing organization</p>

                </div>




            </div>
        </div>
        <hlm-sheet-footer>
            <button hlmBtn type="button" variant="outline" (click)="discard()">Cancelar</button>
            <button hlmBtn type="submit" (click)="save()">Salvar</button>
        </hlm-sheet-footer>
    </hlm-sheet-content>
</hlm-sheet>